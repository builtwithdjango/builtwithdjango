{% extends "base.html" %}
{% load static %}
{% load markdown_extras %}
{% block meta %}
    <title>{{ object.title }}</title>
    <link rel="canonical" href="https://{{ request.get_host }}/blog/{{ object.slug }}" />
    <meta name="description" content="{{ object.description }}" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:creator" content="@rasulkireev" />
    <meta name="twitter:site" content="@builtwithdjango" />
    <meta name="twitter:title" content="{{ object.title }}" />
    <meta name="twitter:description" content="{{ object.description }}" />
    <meta name="twitter:image" content="https://ogi.sh?title={{ object.title }}&unsplashId={{ object.unsplashID }}" />
    <meta property="og:title" content="{{ object.title }}" />
    <meta property="og:url" content="https://{{ request.get_host }}/blog/{{ object.slug }}" />
    <meta property="og:description" content="{{ object.description }}" />
    <meta property="og:image" content="https://ogi.sh?title={{ object.title }}&unsplashId={{ object.unsplashID }}" />
{% endblock meta %}

{% block style %}
<style>
  .prose table {
    border-spacing: 0;
  }

  .prose blockquote,
  .prose table,
  .prose img,
  .prose pre {
    box-shadow: 3px 3px 0 0 #000;
  }
</style>
{% endblock style %}

{% block content %}
    <p class="mt-4 text-blue-700">
        ‚Üê
        <a href="{% url 'blog' %}">back to all posts</a>
    </p>

    {# djlint:off #}
    <div data-controller="exit-intent" data-action="mouseout@document->exit-intent#openModal">
    {# djlint:on #}

        <div class="max-w-3xl mx-auto my-10">
            <div class="prose prose-headings:font-bold prose-table:border-separate prose-table:border prose-table:overflow-hidden prose-table:border-black prose-table:rounded-lg prose-thead:bg-black prose-th:text-white prose-th:py-2 prose-th:px-4 prose-tr:border-y-0 even:prose-tr:bg-gray-100 prose-td:py-2 prose-td:px-4 prose-blockquote:border prose-blockquote:border-black prose-blockquote:p-8 prose-blockquote:text-xl prose-blockquote:rounded-lg prose-blockquote:leading-10 prose-p:text-black prose-p:leading-loose prose-lead:leading-relaxed marker:prose-li:text-black prose-li:text-black prose-li:font-medium prose-a:text-pink-600 prose-a:decoration-wavy prose-a:font-medium hover:prose-a:text-indigo-600 prose-img:border prose-img:border-black prose-img:p-4 prose-img:rounded-lg prose-img:bg-pink-100 prose-pre:bg-black prose-pre:text-white prose-pre:text-base prose-pre:leading-loose">
                <h1>{{ object.title }}</h1>
                <div>
                    {{ object.content | markdown | safe }}
                </div>
            </div>
            <div data-turbo-cache="false"
                 data-exit-intent-target="modal"
                 class="fixed inset-0 z-10 hidden overflow-y-auto"
                 aria-labelledby="modal-title"
                 role="dialog"
                 aria-modal="true">
                <div class="flex items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0">
                    <div data-transition-enter="ease-out duration-300"
                         data-transition-enter-start="opacity-0"
                         data-transition-enter-end="opacity-100"
                         data-transition-leave="ease-in duration-200"
                         data-transition-leave-start="opacity-100"
                         data-transition-leave-end="opacity-0"
                         class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"
                         aria-hidden="true"></div>
                    <!-- This element is to trick the browser into centering the modal contents. -->
                    <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">
                        &#8203;
                    </span>
                    <div data-transition-enter="ease-out duration-300"
                         data-transition-enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                         data-transition-enter-end="opacity-100 translate-y-0 sm:scale-100"
                         data-transition-leave="ease-in duration-200"
                         data-transition-leave-start="opacity-100 translate-y-0 sm:scale-100"
                         data-transition-leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                         class="inline-block px-4 pt-5 pb-4 overflow-hidden text-left align-bottom transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
                        <div class="absolute top-0 right-0 hidden pt-4 pr-4 sm:block">
                            <button data-action="click->
                                exit-intent#closeModal"
                                data-exit-intent-target="closeButton"
                                type="button"
                                class="text-gray-400 bg-white rounded-md hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                                >
                                <span class="sr-only">Close</span>
                                <!-- Heroicon name: outline/x -->
                                <svg class="w-6 h-6"
                                     xmlns="http://www.w3.org/2000/svg"
                                     fill="none"
                                     viewBox="0 0 24 24"
                                     stroke="currentColor"
                                     aria-hidden="true">
                                    <path stroke-linecap="round"
                                          stroke-linejoin="round"
                                          stroke-width="2"
                                          d="M6 18L18 6M6 6l12 12"/>
                                </svg>
                            </button>
                        </div>
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                                <h3 class="text-xl font-medium leading-6 text-gray-900" id="modal-title">
                                    Subscribe to our Newsletter
                                </h3>
                                <div class="mt-2">
                                    <p class="text-base text-gray-500">
                                        To make sure yo don't miss new content and updates about Built with Django subscribe to our newsletter.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <form class="flex flex-row items-center mt-5 sm:ml-4 sm:mt-4"
                              action="{% url 'newsletter_home' %}"
                              method="post"
                              enctype="multipart/form-data">
                            {% csrf_token %} {{ newsletter_form.non_field_errors }}
                            <div class="flex flex-row items-center">
                                <div class="flex flex-col">
                                    <div class="flex flex-row item-center">
                                        <span class="rounded-l-lg">{{ newsletter_form.user_email }}</span>
                                        <button class="px-4 py-2 font-bold text-white bg-green-700 rounded-r-lg shadow hover:bg-green-300"
                                                type="submit">
                                            Submit
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
{% block schema %}
    <script type="application/ld+json">
{
  "@context": "http://schema.org/",
  "@type": "BlogPosting",
  "author": {
    "@type": "Person",
    "name": "Rasul Kireev",
    "image": "https://{{ request.get_host }}{% static 'vendors/images/logo.png' %}"
  },
  "headline": "{{ object.title }}",
  "about": "Django",
  "abstract": "{{ object.description }}",
  "articleBody": "{{ object.content }}",
  "image": "https://ogi.sh?title={{ object.title }}&unsplashId={{ object.unsplashID }}",
  "thumbnailUrl": "https://ogi.sh?title={{ object.title }}&unsplashId={{ object.unsplashID }}",
  "dateCreated": "{{ object.created }}",
  "datePublished": "{{ object.created }}",
  "dateModified": "{{ object.modified }}",
}
    </script>
{% endblock schema %}
